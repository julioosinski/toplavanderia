â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ESP32 LAVADORA - CÃ“DIGO CORRIGIDO PARA SUPABASE            â•‘
â•‘   VersÃ£o: v2.0.1                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ INSTRUÃ‡Ã•ES DE USO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ LOCALIZAÃ‡ÃƒO DO ARQUIVO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
O arquivo corrigido estÃ¡ em:
ğŸ“ public/arduino/ESP32_Lavadora_Individual_CORRIGIDO.ino

Para encontrÃ¡-lo no projeto Lovable:
1. Clique no botÃ£o "Dev Mode" no canto superior esquerdo
2. Navegue atÃ© a pasta "public" â†’ "arduino"
3. Clique com botÃ£o direito em "ESP32_Lavadora_Individual_CORRIGIDO.ino"
4. Selecione "Download" para baixar o arquivo


2ï¸âƒ£ O QUE FOI CORRIGIDO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Adicionado: API Key do Supabase nos headers HTTP
âœ… Adicionado: laundry_id no payload do heartbeat
âœ… Corrigido: esp32_id agora usa "main" (constante ESP32_ID)
âœ… Adicionado: relay_status no payload
âœ… Melhorado: Logs mais detalhados no Serial Monitor


3ï¸âƒ£ CONFIGURAÃ‡Ã•ES NECESSÃRIAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Antes de fazer upload, EDITE estas linhas no arquivo:

ğŸ”§ Linha 23-24: Configurar WiFi
   const char* ssid = "SEU_WIFI";
   const char* password = "SUA_SENHA";

ğŸ”§ Linha 30: API Key do Supabase (jÃ¡ configurada)
   const char* supabaseApiKey = "eyJhbGciOiJIUzI1NiI...";

ğŸ”§ Linha 33: Laundry ID (jÃ¡ configurado)
   const char* laundryId = "8ace0bcb-83a9-4555-a712-63ef5f52e709";

ğŸ”§ Linha 39: ID do ESP32 (mantenha "main" para o principal)
   #define ESP32_ID "main"


4ï¸âƒ£ COMO FAZER UPLOAD PARA O ESP32
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Abra o Arduino IDE
2. Instale as bibliotecas necessÃ¡rias:
   - WiFi (jÃ¡ incluÃ­da no ESP32)
   - WebServer (jÃ¡ incluÃ­da no ESP32)
   - ArduinoJson (Ferramentas â†’ Gerenciar Bibliotecas â†’ buscar "ArduinoJson")
   - HTTPClient (jÃ¡ incluÃ­da no ESP32)

3. Configure a placa:
   Ferramentas â†’ Placa â†’ ESP32 Arduino â†’ ESP32 Dev Module

4. Selecione a porta COM do seu ESP32:
   Ferramentas â†’ Porta â†’ COMx (Windows) ou /dev/ttyUSBx (Linux)

5. Clique em "Upload" (seta para direita)


5ï¸âƒ£ VERIFICAÃ‡ÃƒO APÃ“S UPLOAD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Abra o Serial Monitor (Ctrl+Shift+M ou Ã­cone de lupa)
2. Configure para 115200 baud
3. VocÃª deve ver:
   âœ… WiFi conectado com IP
   âœ… Servidor web iniciado
   âœ… "Heartbeat enviado com sucesso!" com cÃ³digo 200

4. Acesse a interface web do ESP32:
   - Abra o navegador
   - Digite: http://192.168.0.84 (ou o IP que aparecer no Serial Monitor)
   - Clique em "ğŸ’“ Testar Heartbeat"


6ï¸âƒ£ VERIFICAR NO PAINEL ADMIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Acesse o painel admin do seu sistema
2. VÃ¡ em ConfiguraÃ§Ãµes â†’ ESP32
3. Verifique se "Habilitar Monitoramento ESP32" estÃ¡ ativo
4. VÃ¡ em Status de MÃ¡quinas
5. O ESP32 deve aparecer como ğŸŸ¢ Online


7ï¸âƒ£ SOLUÃ‡ÃƒO DE PROBLEMAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âŒ Se aparecer "Heartbeat enviado: 401"
   â†’ Verifique a API Key do Supabase na linha 30

âŒ Se aparecer "Erro no heartbeat: -1"
   â†’ Verifique a conexÃ£o WiFi e a URL do Supabase

âŒ Se o ESP32 nÃ£o aparecer online no painel
   â†’ Verifique se o laundry_id estÃ¡ correto (linha 33)
   â†’ Verifique se o monitoramento estÃ¡ habilitado no admin

âŒ Se der erro de compilaÃ§Ã£o
   â†’ Instale a biblioteca ArduinoJson (versÃ£o 6.x ou superior)


8ï¸âƒ£ LOGS IMPORTANTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
No Serial Monitor, vocÃª deve ver:

âœ… BOM (funcionando):
   ğŸ“¡ Enviando heartbeat...
   âœ… Heartbeat enviado com sucesso!
   CÃ³digo: 200

âŒ RUIM (problema):
   âŒ Erro no heartbeat!
   CÃ³digo: 401 (problema de autenticaÃ§Ã£o)
   CÃ³digo: -1 (problema de rede/conexÃ£o)


9ï¸âƒ£ SUPORTE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Se ainda tiver problemas:

1. Copie os logs do Serial Monitor
2. Tire print da tela de configuraÃ§Ãµes do admin
3. Informe qual erro estÃ¡ aparecendo
4. Compartilhe o IP do ESP32


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Arquivo criado e salvo com sucesso!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•